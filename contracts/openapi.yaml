openapi: 3.0.0
info:
  title: Mortgage Calculator API
  version: 1.0.0
  description: API for calculating mortgage parameters.

paths:
  /calculate:
    post:
      summary: Calculate mortgage parameters
      operationId: calculateMortgage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MortgageCalculationParameters'
      responses:
        '200':
          description: Successful calculation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MortgageCalculationParameters'
        '400':
          description: Invalid input or calculation impossible
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
                    example: "Invalid input: Loan amount must be positive."
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
                    example: "An unexpected error occurred during calculation."

components:
  schemas:
    MortgageCalculationParameters:
      type: object
      properties:
        loan_amount:
          type: number
          format: float
          description: The total principal loan amount.
          minimum: 1000.00
          nullable: true # Can be null if it's the target to calculate
        annual_interest_rate:
          type: number
          format: float
          description: The annual interest rate for the mortgage (e.g., 3.5 for 3.5%).
          minimum: 0.0
          maximum: 100.0
          nullable: true # Can be null if it's the target to calculate
        loan_term_years:
          type: integer
          description: The duration of the loan in years.
          minimum: 1
          nullable: true # Can be null if it's the target to calculate
        pi_monthly_payment:
          type: number
          format: float
          description: The monthly Principal & Interest payment.
          minimum: 0.01
          nullable: true # Can be null if it's the target to calculate
      required:
        - loan_amount
        - annual_interest_rate
        - loan_term_years
        - pi_monthly_payment
      example:
        loan_amount: 200000.00
        annual_interest_rate: 3.5
        loan_term_years: 30
        pi_monthly_payment: 898.09 # Example calculation
